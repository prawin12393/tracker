<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Target Acquired | Minimal</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;700&family=Inter:wght@300;400;500;600;800&display=swap" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                        mono: ['JetBrains Mono', 'monospace'],
                    },
                    boxShadow: {
                        'soft': '0 4px 20px -2px rgba(0, 0, 0, 0.05)',
                        'glow': '0 0 15px rgba(16, 185, 129, 0.3)',
                    }
                }
            }
        }
    </script>
    <style>
        body {
            background-color: #f8fafc; /* Slate 50 */
            color: #1e293b; /* Slate 800 */
        }

        /* Checkbox Animation */
        .checkbox-ui input:checked + div {
            background-color: #10b981;
            border-color: #10b981;
            transform: scale(1.05);
        }
        .checkbox-ui div {
            transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
        }

        /* Smooth Scroll */
        html { scroll-behavior: smooth; }
        
        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 3px; }
        ::-webkit-scrollbar-thumb:hover { background: #94a3b8; }
    </style>
</head>
<body class="min-h-screen flex flex-col items-center">

    <!-- Sticky Header -->
    <header class="w-full max-w-2xl sticky top-0 z-50 bg-white/90 backdrop-blur-md border-b border-slate-200">
        <div class="px-6 py-4">
            <div class="flex justify-between items-end mb-3">
                <div>
                    <h1 class="text-xl font-black tracking-tighter text-slate-900">TARGET <span class="text-emerald-600">ACQUIRED</span></h1>
                    <div id="countdown" class="text-xs font-mono text-slate-500 mt-1">Synchronizing...</div>
                </div>
                <div class="text-right">
                    <div class="text-3xl font-bold text-emerald-600 font-mono tracking-tight" id="progressPercent">0%</div>
                </div>
            </div>
            <!-- Progress Bar -->
            <div class="w-full bg-slate-100 rounded-full h-2 overflow-hidden">
                <div id="progressBar" class="bg-emerald-500 h-2 rounded-full transition-all duration-700 ease-out" style="width: 0%"></div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="w-full max-w-2xl px-4 pb-20 mt-8 flex-grow space-y-10">

        <!-- 1. TODAY'S MISSION -->
        <section id="heroSection" class="transform transition-all duration-500">
            <!-- Injected via JS -->
        </section>

        <!-- 2. UPCOMING / SCHEDULE -->
        <section class="space-y-10">
            
            <div id="phase1Container">
                <div class="flex items-center space-x-3 mb-4 border-b border-slate-200 pb-2">
                    <span class="w-2 h-2 rounded-full bg-emerald-500"></span>
                    <h3 class="font-bold text-xs uppercase tracking-widest text-slate-500">Phase 1: Foundation</h3>
                </div>
                <div id="phase1List" class="space-y-3"></div>
            </div>

            <div id="phase2Container">
                <div class="flex items-center space-x-3 mb-4 mt-12 border-b border-slate-200 pb-2">
                    <span class="w-2 h-2 rounded-full bg-blue-500"></span>
                    <h3 class="font-bold text-xs uppercase tracking-widest text-slate-500">Phase 2: Depth & Loops</h3>
                </div>
                <div id="phase2List" class="space-y-3"></div>
            </div>

            <div id="phase3Container">
                <div class="flex items-center space-x-3 mb-4 mt-12 border-b border-slate-200 pb-2">
                    <span class="w-2 h-2 rounded-full bg-purple-500"></span>
                    <h3 class="font-bold text-xs uppercase tracking-widest text-slate-500">Phase 3: Mock War</h3>
                </div>
                <div id="phase3List" class="space-y-3"></div>
            </div>

        </section>

    </main>

    <footer class="py-12 text-slate-400 text-xs text-center font-mono">
        <p>FOCUS. EXECUTE. REPEAT.</p>
        <button onclick="resetData()" class="mt-4 hover:text-red-500 transition-colors underline decoration-slate-200 underline-offset-4">Reset System</button>
    </footer>

    <script>
        // --- DYNAMIC YEAR CALCULATION ---
        const todayDate = new Date();
        const currentYear = todayDate.getFullYear();
        const currentMonth = todayDate.getMonth(); // 0-11

        let START_YEAR, NEXT_YEAR;
        if (currentMonth < 8) { // Jan to August
            START_YEAR = currentYear - 1;
            NEXT_YEAR = currentYear;
        } else { // Sep to Dec
            START_YEAR = currentYear;
            NEXT_YEAR = currentYear + 1;
        }

        // --- DATA ---
        const rawSchedule = [
            // PHASE 1
            { d: `${START_YEAR}-11-18`, task: "2025 Set 1", phase: 1 },
            { d: `${START_YEAR}-11-19`, task: "2025 Set 2", phase: 1 },
            { d: `${START_YEAR}-11-20`, task: "2024 Set 1", phase: 1 },
            { d: `${START_YEAR}-11-21`, task: "2024 Set 2", phase: 1 },
            { d: `${START_YEAR}-11-22`, task: "2023 Set 1", phase: 1 },
            { d: `${START_YEAR}-11-23`, task: "2023 Set 2", phase: 1 },
            { d: `${START_YEAR}-11-24`, task: "2022 Set 1 (Redo)", phase: 1 },
            { d: `${START_YEAR}-11-25`, task: "2022 Set 2", phase: 1 },
            { d: `${START_YEAR}-11-26`, task: "2021 Set 1", phase: 1 },
            { d: `${START_YEAR}-11-27`, task: "2021 Set 2", phase: 1 },
            { d: `${START_YEAR}-11-28`, task: "Analysis + Weak Topics", phase: 1 },
            { d: `${START_YEAR}-11-29`, task: "NAT-only 2021–25", phase: 1 },
            { d: `${START_YEAR}-11-30`, task: "MCQ-only 2021–25", phase: 1 },
            { d: `${START_YEAR}-12-01`, task: "2020 S1", phase: 1 },
            { d: `${START_YEAR}-12-02`, task: "2020 S2", phase: 1 },
            { d: `${START_YEAR}-12-03`, task: "2019 S1", phase: 1 },
            { d: `${START_YEAR}-12-04`, task: "2019 S2", phase: 1 },
            { d: `${START_YEAR}-12-05`, task: "2018 S1", phase: 1 },
            { d: `${START_YEAR}-12-06`, task: "2018 S2", phase: 1 },
            { d: `${START_YEAR}-12-07`, task: "Analysis", phase: 1 },
            { d: `${START_YEAR}-12-08`, task: "2017 S1", phase: 1 },
            { d: `${START_YEAR}-12-09`, task: "2017 S2", phase: 1 },
            { d: `${START_YEAR}-12-10`, task: "2016 S1", phase: 1 },
            { d: `${START_YEAR}-12-11`, task: "2016 S2", phase: 1 },
            { d: `${START_YEAR}-12-12`, task: "2015 S1", phase: 1 },
            { d: `${START_YEAR}-12-13`, task: "2015 S2", phase: 1 },
            { d: `${START_YEAR}-12-14`, task: "Review", phase: 1 },
            { d: `${START_YEAR}-12-15`, task: "2014 S1", phase: 1 },
            { d: `${START_YEAR}-12-16`, task: "2014 S2", phase: 1 },
            { d: `${START_YEAR}-12-17`, task: "2013", phase: 1 },
            { d: `${START_YEAR}-12-18`, task: "2012", phase: 1 },
            { d: `${START_YEAR}-12-19`, task: "2011", phase: 1 },
            { d: `${START_YEAR}-12-20`, task: "Grand Revision", phase: 1 },

            // PHASE 2
            { d: `${START_YEAR}-12-21`, task: "SOM + 20 PYQs", phase: 2 },
            { d: `${START_YEAR}-12-22`, task: "Structural analysis + 20 PYQs", phase: 2 },
            { d: `${START_YEAR}-12-23`, task: "RCC + 20 PYQs", phase: 2 },
            { d: `${START_YEAR}-12-24`, task: "Soil mechanics + 20 PYQs", phase: 2 },
            { d: `${START_YEAR}-12-25`, task: "Foundation + 15 PYQs", phase: 2 },
            { d: `${START_YEAR}-12-26`, task: "Fluid Mechanics + 20 PYQs", phase: 2 },
            { d: `${START_YEAR}-12-27`, task: "Hydrology + Irrigation", phase: 2 },
            { d: `${START_YEAR}-12-28`, task: "Env – wastewater", phase: 2 },
            { d: `${START_YEAR}-12-29`, task: "Env – water treatment", phase: 2 },
            { d: `${START_YEAR}-12-30`, task: "Env – air/noise", phase: 2 },
            { d: `${START_YEAR}-12-31`, task: "Transportation", phase: 2 },
            { d: `${NEXT_YEAR}-01-01`, task: "Surveying", phase: 2 },
            { d: `${NEXT_YEAR}-01-02`, task: "Engineering Maths", phase: 2 },
            { d: `${NEXT_YEAR}-01-03`, task: "Aptitude", phase: 2 },
            // Loop
            { d: `${NEXT_YEAR}-01-04`, task: "PYQ loop (2025)", phase: 2 },
            { d: `${NEXT_YEAR}-01-05`, task: "PYQ loop (2024)", phase: 2 },
            { d: `${NEXT_YEAR}-01-06`, task: "PYQ loop (2023)", phase: 2 },
            { d: `${NEXT_YEAR}-01-07`, task: "PYQ loop (2022)", phase: 2 },
            { d: `${NEXT_YEAR}-01-08`, task: "PYQ loop (2021)", phase: 2 },
            { d: `${NEXT_YEAR}-01-09`, task: "PYQ loop (2020)", phase: 2 },
            { d: `${NEXT_YEAR}-01-10`, task: "PYQ loop (2019)", phase: 2 },
            { d: `${NEXT_YEAR}-01-11`, task: "PYQ loop (2018)", phase: 2 },
            { d: `${NEXT_YEAR}-01-12`, task: "PYQ loop (2017)", phase: 2 },
            { d: `${NEXT_YEAR}-01-13`, task: "PYQ loop (2016)", phase: 2 },
            { d: `${NEXT_YEAR}-01-14`, task: "PYQ loop (2015)", phase: 2 },
            { d: `${NEXT_YEAR}-01-15`, task: "PYQ loop (2014-11)", phase: 2 },

            // PHASE 3
            { d: `${NEXT_YEAR}-01-16`, task: "Mock1", phase: 3 },
            { d: `${NEXT_YEAR}-01-17`, task: "Analysis Mock 1", phase: 3 },
            { d: `${NEXT_YEAR}-01-18`, task: "Mock2", phase: 3 },
            { d: `${NEXT_YEAR}-01-19`, task: "Analysis Mock 2", phase: 3 },
            { d: `${NEXT_YEAR}-01-20`, task: "Mock3", phase: 3 },
            { d: `${NEXT_YEAR}-01-21`, task: "Analysis Mock 3", phase: 3 },
            { d: `${NEXT_YEAR}-01-22`, task: "Weak topics", phase: 3 },
            { d: `${NEXT_YEAR}-01-23`, task: "Mock4", phase: 3 },
            { d: `${NEXT_YEAR}-01-24`, task: "Analysis Mock 4", phase: 3 },
            { d: `${NEXT_YEAR}-01-25`, task: "Mock5", phase: 3 },
            { d: `${NEXT_YEAR}-01-26`, task: "Analysis Mock 5", phase: 3 },
            { d: `${NEXT_YEAR}-01-27`, task: "Mock6", phase: 3 },
            { d: `${NEXT_YEAR}-01-28`, task: "Analysis Mock 6", phase: 3 },
            { d: `${NEXT_YEAR}-01-29`, task: "Formula Rev", phase: 3 },
            { d: `${NEXT_YEAR}-01-30`, task: "Mock7", phase: 3 },
            { d: `${NEXT_YEAR}-01-31`, task: "Analysis Mock 7", phase: 3 },
            { d: `${NEXT_YEAR}-02-01`, task: "Mock8", phase: 3 },
            { d: `${NEXT_YEAR}-02-02`, task: "Analysis Mock 8", phase: 3 },
            { d: `${NEXT_YEAR}-02-03`, task: "Mock9", phase: 3 },
            { d: `${NEXT_YEAR}-02-04`, task: "Analysis Mock 9", phase: 3 },
            { d: `${NEXT_YEAR}-02-05`, task: "Error Log", phase: 3 },
            { d: `${NEXT_YEAR}-02-06`, task: "Mock10", phase: 3 },
            { d: `${NEXT_YEAR}-02-07`, task: "Analysis Mock 10", phase: 3 },
            { d: `${NEXT_YEAR}-02-08`, task: "Mock11", phase: 3 },
            { d: `${NEXT_YEAR}-02-09`, task: "Analysis Mock 11", phase: 3 },
            { d: `${NEXT_YEAR}-02-10`, task: "Mock12", phase: 3 },
            { d: `${NEXT_YEAR}-02-11`, task: "Analysis Mock 12", phase: 3 },
            { d: `${NEXT_YEAR}-02-12`, task: "Formula+NAT Rev", phase: 3 },
            { d: `${NEXT_YEAR}-02-13`, task: "Light Rev", phase: 3 },
        ];

        // --- STATE ---
        const STORE_KEY = "target_acquired_minimal_v1";
        let state = JSON.parse(localStorage.getItem(STORE_KEY)) || { completed: {} };

        // --- LOGIC ---
        function getTodayStr() {
            const d = new Date();
            const year = d.getFullYear();
            const month = String(d.getMonth() + 1).padStart(2, '0');
            const day = String(d.getDate()).padStart(2, '0');
            return `${year}-${month}-${day}`;
        }

        function formatDateDisplay(dateStr) {
            const d = new Date(dateStr);
            const days = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];
            const months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
            return {
                dayName: days[d.getDay()],
                dayNum: d.getDate(),
                month: months[d.getMonth()]
            };
        }

        function saveState() {
            localStorage.setItem(STORE_KEY, JSON.stringify(state));
            render();
        }

        function toggleTask(dateStr) {
            // Standard toggle behavior: check <-> uncheck
            if (state.completed[dateStr]) {
                delete state.completed[dateStr];
            } else {
                state.completed[dateStr] = true;
            }
            saveState();
        }

        function resetData() {
            if(confirm("Reset all progress?")) {
                state = { completed: {} };
                saveState();
            }
        }

        function render() {
            const todayStr = getTodayStr();
            const heroSection = document.getElementById('heroSection');
            const phase1List = document.getElementById('phase1List');
            const phase2List = document.getElementById('phase2List');
            const phase3List = document.getElementById('phase3List');

            phase1List.innerHTML = '';
            phase2List.innerHTML = '';
            phase3List.innerHTML = '';

            let totalTasks = rawSchedule.length;
            let completedTasks = Object.keys(state.completed).length;
            let progress = Math.round((completedTasks / totalTasks) * 100);

            document.getElementById('progressPercent').innerText = `${progress}%`;
            document.getElementById('progressBar').style.width = `${progress}%`;
            document.getElementById('countdown').innerText = `${new Date().toDateString()} • ${totalTasks - completedTasks} Tasks Left`;

            let heroFound = false;

            rawSchedule.forEach(item => {
                const isCompleted = !!state.completed[item.d];
                const isToday = item.d === todayStr;
                const isPast = item.d < todayStr;
                
                const [y, m, d] = item.d.split('-').map(Number);
                const dateObjDate = new Date(y, m - 1, d);
                const dateObj = {
                   month: dateObjDate.toLocaleString('default', { month: 'short' }),
                   dayNum: d
                };

                // --- HERO CARD (Today) ---
                if (isToday) {
                    heroFound = true;
                    // White clean card, shadow-lg
                    // If completed: Green border, green background tint
                    // If not: White background, slate border
                    
                    const heroClasses = isCompleted 
                        ? "bg-emerald-50 border-2 border-emerald-500 shadow-soft" 
                        : "bg-white border-2 border-slate-900 shadow-xl";
                    
                    const btnClasses = isCompleted 
                        ? "bg-emerald-500 border-emerald-500 text-white" 
                        : "bg-white border-slate-300 text-white hover:border-emerald-500";

                    heroSection.innerHTML = `
                        <div class="rounded-2xl p-8 relative overflow-hidden transition-colors duration-300 ${heroClasses}">
                            <div class="flex flex-col md:flex-row md:items-center justify-between gap-6">
                                <div>
                                    <div class="flex items-center space-x-2 mb-3">
                                        <span class="px-2 py-0.5 rounded text-[10px] font-bold uppercase tracking-wider ${isCompleted ? 'bg-emerald-200 text-emerald-800' : 'bg-slate-100 text-slate-600'}">
                                            Today's Mission
                                        </span>
                                        <span class="text-xs text-slate-400 font-mono">${dateObj.month} ${dateObj.dayNum}</span>
                                    </div>
                                    <h2 class="text-3xl md:text-4xl font-black ${isCompleted ? 'text-emerald-800' : 'text-slate-900'} tracking-tight leading-none mb-1">
                                        ${item.task}
                                    </h2>
                                    <p class="text-sm font-semibold tracking-wide uppercase ${isCompleted ? 'text-emerald-600' : 'text-slate-400'}">Phase ${item.phase}</p>
                                </div>

                                <label class="checkbox-ui cursor-pointer relative flex-shrink-0">
                                    <input type="checkbox" class="sr-only" 
                                        ${isCompleted ? 'checked' : ''} 
                                        onchange="toggleTask('${item.d}')">
                                    <div class="w-16 h-16 rounded-xl border-2 flex items-center justify-center shadow-sm ${btnClasses}">
                                        <i class="fas fa-check text-2xl ${isCompleted ? 'block' : 'hidden'}"></i>
                                    </div>
                                </label>
                            </div>
                            ${isCompleted 
                                ? '<div class="mt-6 text-center text-xs font-bold font-mono text-emerald-600 uppercase tracking-widest">Target Neutralized</div>' 
                                : ''}
                        </div>
                    `;
                }

                // --- LIST ITEMS ---
                // Minimal white list
                // If Completed: Green-50 background, Green border, Green Text
                // If Overdue: Red-50 background, Red Border
                // Default: White background, gray border

                let rowClass = "flex items-center justify-between p-4 rounded-xl border transition-all duration-200 ";
                let textClass = "font-medium text-slate-700";
                let dateClass = "text-slate-400";
                let checkClass = "bg-white border-slate-300 hover:border-emerald-400";

                if (isToday) {
                    rowClass += "bg-white border-slate-900 shadow-md transform scale-[1.01] my-4 ring-4 ring-slate-100";
                    textClass = "font-bold text-slate-900";
                    dateClass = "text-emerald-600 font-bold";
                } else if (isCompleted) {
                    rowClass += "bg-emerald-50/50 border-emerald-200";
                    textClass = "text-slate-400 line-through decoration-emerald-500/50";
                    dateClass = "text-emerald-400/50";
                    checkClass = "bg-emerald-500 border-emerald-500";
                } else if (isPast) {
                    rowClass += "bg-red-50/50 border-red-200";
                    textClass = "text-red-900";
                    dateClass = "text-red-400";
                } else {
                    rowClass += "bg-white border-slate-200 hover:border-slate-300";
                }

                const html = `
                    <div class="${rowClass}" id="item-${item.d}">
                        <div class="flex items-center space-x-5">
                            <div class="flex flex-col items-center justify-center w-10 text-center leading-none ${dateClass}">
                                <span class="text-[10px] font-bold uppercase tracking-wider">${dateObj.month}</span>
                                <span class="text-xl font-bold">${dateObj.dayNum}</span>
                            </div>
                            <div>
                                <div class="${textClass}">${item.task}</div>
                                ${isPast && !isCompleted ? '<div class="text-[10px] text-red-500 font-bold uppercase tracking-wider mt-0.5">Overdue</div>' : ''}
                            </div>
                        </div>
                        <label class="checkbox-ui cursor-pointer p-1">
                             <input type="checkbox" class="sr-only" 
                                ${isCompleted ? 'checked' : ''} 
                                onchange="toggleTask('${item.d}')">
                            <div class="w-6 h-6 rounded border flex items-center justify-center text-white ${checkClass}">
                                <i class="fas fa-check text-[10px] ${isCompleted ? 'block' : 'hidden'}"></i>
                            </div>
                        </label>
                    </div>
                `;

                if (item.phase === 1) phase1List.innerHTML += html;
                if (item.phase === 2) phase2List.innerHTML += html;
                if (item.phase === 3) phase3List.innerHTML += html;

            });

            if (!heroFound) {
                 heroSection.innerHTML = `
                    <div class="bg-white rounded-2xl p-8 text-center border-2 border-dashed border-slate-300">
                        <h2 class="text-2xl font-bold text-slate-800 mb-2">Rest Day</h2>
                        <p class="text-slate-500 text-sm">No missions scheduled for today.</p>
                    </div>
                `;
            }
        }

        render();

        setTimeout(() => {
            const todayStr = getTodayStr();
            const el = document.getElementById(`item-${todayStr}`);
            if(el) {
                el.scrollIntoView({ behavior: 'smooth', block: 'center' });
            }
        }, 500);

    </script>
</body>
</html>
